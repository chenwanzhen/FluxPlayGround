<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Websocket Playgroud</title>
    <script type="text/javascript" src="/file?name=common.js"></script>
</head>
<body>
<p>Echo your input with 2 seconds delay</p>
<p>
    输入： <br/>
    <textarea id="input" name="input" cols="40"></textarea>
</p>

<p>
    输出<br />
    <div id="output"></div>
</p>

<p>
    返回 <a href="/">到首页</a>
</p>

<script type="application/javascript">
    var socket = new WebSocket("ws://" + location.host + "/websocket/echo");
    addEvent("keypress", document.getElementById('input'), function (event) {
        socket.send(event.key);
    });

    var output = document.getElementById('output');
    socket.onmessage = function (e) {
        output.innerHTML = output.innerHTML + e.data;
    };

</script>

</body>
</html>